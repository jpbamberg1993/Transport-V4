<% provide(:title, 'Current quotes on shipment') %>
<h1>Current quotes on shipment</h1>

<p>
  <strong>Origin:</strong>
  <%= @shipment.origin %>
</p>
<p>
  <strong>Destination:</strong>
  <%= @shipment.destination %>
</p>
<p>
  <strong>Mode of transportation:</strong>
  <%= @shipment.mode_of_transportation %>
</p>
<p>
  <strong>Equipment type:</strong>
  <%= @shipment.equipment_type %>
</p>
<p>
  <strong>Minimum commitment:</strong>
  <%= @shipment.minimum_commitment %>
</p>
<p>
  <strong>Maximum commitment:</strong>
  <%= @shipment.maximum_commitment %>
</p>
<p>
  <strong>Cost:</strong>
  $<%= @shipment.formatted_price %>
</p>
<% if current_user.carrier? %>
<p>
  <strong>Shipper:</strong>
  <%= @shipment.company_name %>
</p>
<% end %>

<% if shipper? %>

  <% if @offers.count > 0 %>
    <h4>Submitted Offers</h4>
    <div class="placed_offers">
      <thead>
        <tr>
          <th>Company</th>
          <th>Offer</th>
        </tr>
      </thead>
      <tbody>
        <%= render "offers/accept_offer", collection: @offers %>
      </tbody>
    </div>

  <% else %>
    <h4>No quotes have been submitted at this time.</h4>
  <% end %>
<% end %>


<% if carrier? %>
  <% if @shipment.has_offer?(current_user) %>
    <%= @shipment.user_offer(current_user) %>
    <% @offer = @shipment.set_offer(current_user) %>
    <%= link_to "Change amount", edit_offer_path(@offer) %>
    <br>
  <% else %>
    <%= render "offers/form" %>
  <% end %>
<% end %>

<% if shipper? %>
  <%= link_to 'Invite Carriers', choose_carriers_path(@shipment) %> |
  <%= link_to 'Edit', edit_shipment_path(@shipment) %> |
<% end %>

<%= link_to 'Back', shipments_path %>
